#!/bin/bash

acpi_output=$(acpi -b)
if [[ -z "$acpi_output" ]]; then
    echo "Battery not found"
    exit 1
fi

status=$(echo "$acpi_output" | awk -F', ' '{print $1}' | awk '{print $3}')
capacity=$(echo "$acpi_output" | awk -F', ' '{print $2}' | tr -d '%')

status_lower=$(echo "$status" | tr '[:upper:]' '[:lower:]')

# اللون الافتراضي: أزرق
color="#7aa2f7"

# تغيير اللون حسب الحالة
if [[ "$status_lower" == "charging" ]]; then
    color="#66bb6a"  # أخضر
elif [[ "$status_lower" == "full" || "$status_lower" == "not" ]]; then
    color="#f6c453"  # أصفر
elif [[ "$capacity" -le 20 && "$status_lower" == "discharging" ]]; then
    color="#e57373"  # أحمر عند بطارية منخفضة
fi

echo "%{F$color}Bat%{F-} $capacity%"

