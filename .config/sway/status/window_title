#!/bin/bash
# Display active window title on Sway/Wayland, silent if no active window

set -euo pipefail

print_title() {
    local title="$1"
    local max_len=30
    title=$(echo "$title" | tr -cd '[:print:]')
    if (( ${#title} > max_len )); then
        title="${title:0:max_len}..."
    fi
    printf "%-${max_len}s\n" "$title"
}

# Get focused window name via swaymsg
title=$(swaymsg -t get_tree | jq -r '.. | select(.focused? == true).name' 2>/dev/null || echo "")

# Only print if title is non-empty, not null, and not purely numeric
if [[ -n "$title" && "$title" != "null" && ! "$title" =~ ^[0-9]+$ ]]; then
    print_title "$title"
fi

